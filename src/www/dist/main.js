var app={init:function(){this.sorter=this._get_sorter(),this.searcher=this._get_searcher(),this.data=this._get_fetched_data(),this.current_data=this.data},restructure:function(reference){var data=window.event,target=data.target||data.srcElement;data.preventDefault();function get_value(doc,span){return doc=(new DOMParser).parseFromString(doc[span],"text/html"),1==(span=doc.getElementsByTagName("span")).length?span[0].getAttribute("data-value"):doc.body.innerHTML}var data=this.current_data,name=this.sorter[reference],use_descending=this._has_class(target,"ascending"),is_integer=this._get_attribute(target,"data-sorter-is-integer");data.sort(function(first_value,second_value){first_value=get_value(first_value,name),second_value=get_value(second_value,name);return"true"===is_integer?use_descending?first_value-second_value:second_value-first_value:use_descending?first_value<second_value?1:-1:second_value<first_value?1:-1}),this._clear_class(),use_descending?target.classList.add("descending"):target.classList.add("ascending"),document.getElementById("packages-content").innerHTML=this._rebuild_tbody(data)},search:function(){var line,text,skip,i,data=this.data,searcher=this.searcher,results=[],value=document.getElementById("search-box").value;if(""==(value=value.replace(/\s{2,}/g," ").trim().toLowerCase()))results=this.data;else for(i=0;i<data.length;i++)for(key in skip=!1,line=data[i])searcher.includes(key)&&(text=line[key].toLowerCase(),!skip&&-1<text.indexOf(value)&&(results.push(line),skip=!0));0==(this.current_data=results).length?(document.getElementById("table-content").style.display="none",document.getElementById("empty-content").innerHTML="We did not find results for: <strong>"+value+"</strong>"):(document.getElementById("table-content").style.display="table",document.getElementById("empty-content").innerHTML="",document.getElementById("packages-content").innerHTML=this._rebuild_tbody(results))},_rebuild_tbody:function(data){for(var line,key,tbody="",content="",i=0;i<data.length;i++){for(key in content="",line=data[i])content+="<td>"+line[key]+"</td>";tbody+="<tr>$content</tr>".replace("$content",content)}return tbody},_has_class:function(target,name){return new RegExp("(\\s|^)"+name+"(\\s|$)").test(target.className)},_get_attribute:function(target,name){return target.getAttribute(name)},_clear_class:function(){for(var th=document.getElementsByClassName("event-th"),i=0;i<th.length;i++)th[i].classList.remove("ascending"),th[i].classList.remove("descending")},_get_searcher:function(){for(var reference,data=[],th=document.getElementsByClassName("event-th"),i=0;i<th.length;i++)"true"==th[i].getAttribute("data-is-searchable")&&(reference=th[i].getAttribute("data-sorter-reference"),data.push(reference));return data},_get_sorter:function(){for(var data=[],th=document.getElementsByClassName("event-th"),i=0;i<th.length;i++)data[i]=th[i].getAttribute("data-sorter-reference");return data},_get_fetched_data:function(){for(var td,content,j,data=[],tr=document.getElementsByTagName("tr"),i=0;i<tr.length;i++){for(td=tr[i].getElementsByTagName("td"),content={},j=0;j<td.length;j++)content[this.sorter[j]]=td[j].innerHTML;0<td.length&&data.push(content)}return data}};